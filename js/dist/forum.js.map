{"version":3,"file":"forum.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASM,iBAAT,GAA6B;AAC1C;AACA;AACAL,EAAAA,8DAAQ,CAACC,sFAAD,EAAwB,MAAxB,EAAgC,UAAUM,QAAV,EAAoB;AAAA;AAAA;;AAC1D,QAAI,KAAKC,QAAL,EAAJ,EAAqB,OAAO,IAAP;;AAErB,QAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,WAAI,CAACC,CAAL,GAASD,OAAT,CAAiB,KAAI,CAACE,IAAL,CAAUC,IAAV,CAAe,KAAf,CAAjB;AACD,KAFD;;AAIA,QAAMC,QAAQ,GAAG,CAAC,kBAACd,iEAAD,aAAC,aAAagB,IAAd,CAAlB;AACA,QAAMC,iBAAiB,GAAG,CAAC,CAACjB,uEAAA,CAAoB,oCAApB,CAAF,GAA8D,+BAA9D,GAAgG,aAA1H;AAEA,WACE;AAAQ,eAAM;AAAd,OACE;AAAK,eAAM;AAAX,OACGc,QAAQ,GACP,EAAC,wEAAD;AACE,UAAI,EAAC,cADP;AAEE,aAAO,EAAEJ,OAFX;AAGE,eAAS,EAAC,6CAHZ;AAIE,oBAAYV,wEAAA,CAAqB,8BAArB;AAJd,MADO,GAQP,EATJ,EAYE;AAAK,eAAM;AAAX,OACE;AAAI,eAAM;AAAV,OAAwBA,uEAAA,CAAoB,cAApB,CAAxB,CADF,EAEE;AAAK,eAAM;AAAX,OAA4BsB,CAAC,CAACC,KAAF,CAAQvB,uEAAA,CAAoB,gBAApB,CAAR,CAA5B,CAFF,CAZF,EAiBG,CAACc,QAAD,GACC;AAAK,eAAOG;AAAZ,OACE,aADF,EAEG,CAAC,CAACjB,uEAAA,CAAoB,aAApB,CAAF,GACC,EAAC,wEAAD;AAAQ,eAAS,EAAC,QAAlB;AAA2B,aAAO,EAAE;AAAA,eAAMA,kEAAA,CAAeK,4EAAf,CAAN;AAAA;AAApC,OACGL,wEAAA,CAAqB,gCAArB,CADH,CADD,GAKC,EAPJ,EAUE,EAAC,wEAAD;AAAQ,eAAS,EAAC,wBAAlB;AAA2C,aAAO,EAAE;AAAA,eAAMA,kEAAA,CAAeI,2EAAf,CAAN;AAAA;AAApD,OACGJ,wEAAA,CAAqB,+BAArB,CADH,CAVF,CADD,GAgBC,EAjCJ,CADF,CADF;AAwCD,GAlDO,CAAR,CAH0C,CAuD1C;;AACAC,EAAAA,8DAAQ,CAACC,sFAAD,EAAwB,UAAxB,EAAoC,UAAUM,QAAV,EAAoB;AAAA;;AAC9D,QAAI,mBAACR,iEAAD,aAAC,cAAagB,IAAd,CAAJ,EAAwB,OAAO,KAAP;AACxB,WAAOR,QAAQ,EAAf;AACD,GAHO,CAAR;AAID;;;;;;;;;;;;;;;ACnED;AACA;AAEAR,wEAAA,CAAqB,wBAArB,EAA+C,YAAM;AACnDM,EAAAA,8DAAiB;AAClB,CAFD;;;;;;;;;;;ACHA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D","sources":["webpack://@blomstra/welcome-login/./src/forum/addLoginAndSignup.js","webpack://@blomstra/welcome-login/./src/forum/index.ts","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['common/components/Button']\"","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['common/extend']\"","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['forum/app']\"","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@blomstra/welcome-login/external root \"flarum.core.compat['forum/components/WelcomeHero']\"","webpack://@blomstra/welcome-login/webpack/bootstrap","webpack://@blomstra/welcome-login/webpack/runtime/compat get default export","webpack://@blomstra/welcome-login/webpack/runtime/define property getters","webpack://@blomstra/welcome-login/webpack/runtime/hasOwnProperty shorthand","webpack://@blomstra/welcome-login/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\nimport { override } from 'flarum/common/extend';\nimport WelcomeHero from 'flarum/forum/components/WelcomeHero';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\n\nexport default function addLoginAndSignup() {\n  // Only allow logged in users to hide the WelcomeHero\n  // Add signup and login buttons to the WelcomeHero\n  override(WelcomeHero.prototype, 'view', function (original) {\n    if (this.isHidden()) return null;\n\n    const slideUp = () => {\n      this.$().slideUp(this.hide.bind(this));\n    };\n\n    const loggedIn = !!app.session?.user;\n    const extraDivClassName = !!app.forum.attribute('blomstra.welcome-login.only-mobile') ? 'extraSignin extraSigninMobile' : 'extraSignin';\n\n    return (\n      <header class=\"Hero WelcomeHero\">\n        <div class=\"container\">\n          {loggedIn ? (\n            <Button\n              icon=\"fas fa-times\"\n              onclick={slideUp}\n              className=\"Hero-close Button Button--icon Button--link\"\n              aria-label={app.translator.trans('core.forum.welcome_hero.hide')}\n            />\n          ) : (\n            ''\n          )}\n\n          <div class=\"containerNarrow\">\n            <h2 class=\"Hero-title\">{app.forum.attribute('welcomeTitle')}</h2>\n            <div class=\"Hero-subtitle\">{m.trust(app.forum.attribute('welcomeMessage'))}</div>\n          </div>\n\n          {!loggedIn ? (\n            <div class={extraDivClassName}>\n              <br />\n              {!!app.forum.attribute('allowSignUp') ? (\n                <Button className=\"Button\" onclick={() => app.modal.show(SignUpModal)}>\n                  {app.translator.trans('core.forum.header.sign_up_link')}\n                </Button>\n              ) : (\n                ''\n              )}\n\n              <Button className=\"Button Button--primary\" onclick={() => app.modal.show(LogInModal)}>\n                {app.translator.trans('core.forum.header.log_in_link')}\n              </Button>\n            </div>\n          ) : (\n            ''\n          )}\n        </div>\n      </header>\n    );\n  });\n\n  // If there's no logged in user, always show the WelcomeHero\n  override(WelcomeHero.prototype, 'isHidden', function (original) {\n    if (!app.session?.user) return false;\n    return original();\n  });\n}\n","import app from 'flarum/forum/app';\nimport addLoginAndSignup from './addLoginAndSignup';\n\napp.initializers.add('blomstra/welcome-login', () => {\n  addLoginAndSignup();\n});\n","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/SignUpModal'];","module.exports = flarum.core.compat['forum/components/WelcomeHero'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","override","WelcomeHero","Button","LogInModal","SignUpModal","addLoginAndSignup","prototype","original","isHidden","slideUp","$","hide","bind","loggedIn","session","user","extraDivClassName","forum","attribute","translator","trans","m","trust","modal","show","initializers","add"],"sourceRoot":""}